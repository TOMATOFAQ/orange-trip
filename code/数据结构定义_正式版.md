<center>

# 数据结构定义

</center>




# 全局变量

## 1.Schedule 的定义：
| key    | value              |
| ------ | ------------------ |
| from   | string             |
| to     | string             |
| number | string             |
| start  | list               |
| end    | list               |
| price  | int                |
| type   | string e.g. N/R/AC |

e.g.
```js
// javascript or 字符串表示
{
    "from": "Beijing", 
    "to": "Shanghai", 
    "number": "4817", 
    "start": [16, 30], 
    "end": [1, 7, 30], 
    "duration": [0, 2, 15], // 该 duration 可选，因为容易计算得到
    "price": 341, 
    "type": "N"
}
```

```cpp
// c++ 下构造 json 对象的三种方式

// 根据字符串构造
string s = R"({
    "from": "Beijing",
    "to": "Shanghai", 
    "number": "CZ9245", 
    "start": [13, 0], 
    "end": [0, 15, 10], 
    "price": 1240, 
    "type": "AC"}
)";
json j1 = json::parse(s);

// 直接构建 json 对象
json j2 = {
    {"from", "Beijing"},
    {"to", "Shanghai"},
    {"number", "CZ9245"},
    {"start", {13, 0}},
    {"end", {0, 15, 10}},
    {"price", 1240},
    {"type", "AC"}
};

// 对 json 对象添加属性构造
json j3;
j3["from"] = "Beijing";
```

以面向对象的思想来看，对于每一个 schedule，可看成是一个抽象类型。安排一个 schedule 的过程看成是这个 schedule 实例化的过程，需要给其加上出发时间的属性。所以一个实际的 schedule 的完整定义还需添加{"data",[1,1,1]}键值对,表示这个 schedule 实例化成了一个于距离指定开始时间一天一时一分时出发的 schedule。


## 2.D的定义 (database)
D 是一个元素类型为 json 的线性表。其存储的内容是数据集里所有的schedule。
```cpp
vector<json> D;
```

## 3.G的定义 (graph)
G 是一个类型为 json 的图。其是 D 的以城市为节点的邻接表表出。
```js
json G;
G = {
    "Beijing":{
        {"from": "Beijing", "to": "Shanghai", "number": "4817", "start": [0, 16, 30], "end": [1, 7, 30], "duration": [0, 15, 0], "price": 341, "type": "N"},
        {"from": "Beijing", "to": "Shanghai", "number": "CZ6412", "start": [0, 6, 25], "end": [0, 8, 40], "duration": [0, 2, 15], "price": 720, "type": "AC"}
    }
    "Shanghai":{
        {"from": "Shanghai", "to": "Wuhan", "number": "000756", "start": [0, 10, 50], "end": [0, 22, 50], "duration": [0, 12, 0], "price": 262, "type": "N"},
        {"from": "Shanghai", "to": "Wuhan", "number": "009675", "start": [0, 11, 56], "end": [0, 23, 56], "duration": [0, 12, 0], "price": 230, "type": "N"}
    }
}
```


# 各模块变量

## 1. Dijkstra模块

### 1. status的定义

status表示图上各个节点的到达信息。包括抵达时间t,抵达消费m,抵达所经过的 schedule 序列。
```js
json status;
status = {
    "Beijing":{
        "t":0,
        "m":0,
        "s":[]
    },
}
```


# reference

json库的 github 地址：https://github.com/nlohmann/json